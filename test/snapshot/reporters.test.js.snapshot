exports[`Reporter snapshots > JSON report snapshot 1`] = `
"{\\n  \\"metadata\\": {\\n    \\"generatedAt\\": \\"TIMESTAMP\\",\\n    \\"version\\": \\"1.1.0\\",\\n    \\"dbPath\\": \\"/path/to/test.db\\",\\n    \\"limit\\": 10\\n  },\\n  \\"analysis\\": {\\n    \\"redundancy\\": {\\n      \\"profile_ps_redundancy\\": {\\n        \\"summary\\": {\\n          \\"total_redundant_permissions\\": 15,\\n          \\"affected_users\\": 3,\\n          \\"affected_permission_sets\\": 2\\n        },\\n        \\"details\\": [\\n          {\\n            \\"permission\\": \\"ObjectPermissions::Account.Read\\",\\n            \\"user\\": \\"alice@example.com\\",\\n            \\"profile\\": \\"Standard User\\",\\n            \\"permission_sets\\": [\\n              \\"Sales Access\\",\\n              \\"Account Manager\\"\\n            ],\\n            \\"value\\": \\"true\\"\\n          }\\n        ]\\n      },\\n      \\"multiple_ps_redundancy\\": {\\n        \\"summary\\": {\\n          \\"total_redundant_permissions\\": 8,\\n          \\"affected_users\\": 2\\n        },\\n        \\"details\\": []\\n      },\\n      \\"psg_redundancy\\": {\\n        \\"summary\\": {\\n          \\"total_redundant_assignments\\": 4,\\n          \\"affected_users\\": 2\\n        },\\n        \\"details\\": [\\n          {\\n            \\"user\\": \\"bob@example.com\\",\\n            \\"psg\\": \\"Sales Team\\",\\n            \\"redundant_ps\\": [\\n              \\"Sales Access\\"\\n            ]\\n          }\\n        ]\\n      },\\n      \\"profile_only_permissions\\": {\\n        \\"summary\\": {\\n          \\"total_profile_only\\": 42,\\n          \\"profiles_affected\\": 3,\\n          \\"percentage_profile_only\\": \\"25.5\\"\\n        },\\n        \\"details\\": []\\n      }\\n    },\\n    \\"overlap\\": {\\n      \\"summary\\": {\\n        \\"total_comparisons\\": 10,\\n        \\"high_overlap_pairs\\": 2\\n      },\\n      \\"pairs\\": [\\n        {\\n          \\"permission_set_a\\": {\\n            \\"name\\": \\"Sales Basic\\",\\n            \\"permission_count\\": 10\\n          },\\n          \\"permission_set_b\\": {\\n            \\"name\\": \\"Sales Advanced\\",\\n            \\"permission_count\\": 15\\n          },\\n          \\"metrics\\": {\\n            \\"overlap_percentage\\": 0.95,\\n            \\"jaccard_index\\": 0.75\\n          }\\n        }\\n      ]\\n    },\\n    \\"psg_recommendations\\": {\\n      \\"hierarchical\\": {\\n        \\"recommendations\\": [\\n          {\\n            \\"basePermissionSet\\": \\"Admin Full\\",\\n            \\"basePermissionCount\\": 100,\\n            \\"totalSubsets\\": 2,\\n            \\"recommendedPSG\\": {\\n              \\"members\\": [\\n                \\"Admin Read\\",\\n                \\"Admin Edit\\"\\n              ]\\n            }\\n          }\\n        ]\\n      },\\n      \\"coAssignment\\": {\\n        \\"recommendations\\": [\\n          {\\n            \\"members\\": [\\n              \\"Sales Basic\\",\\n              \\"Marketing Basic\\"\\n            ],\\n            \\"member_count\\": 2,\\n            \\"estimated_reduction\\": 2\\n          }\\n        ]\\n      }\\n    }\\n  },\\n  \\"aggregated\\": {\\n    \\"executiveSummary\\": {\\n      \\"metrics\\": [\\n        {\\n          \\"label\\": \\"Total Redundant Permissions\\",\\n          \\"value\\": 15,\\n          \\"context\\": \\"Across 3 users\\"\\n        },\\n        {\\n          \\"label\\": \\"Permission Sets Analyzed\\",\\n          \\"value\\": 5,\\n          \\"context\\": \\"With 2 high-overlap pairs\\"\\n        }\\n      ],\\n      \\"findings\\": [\\n        {\\n          \\"title\\": \\"Profile-PS Overlap\\",\\n          \\"detail\\": \\"15 redundant permissions found between profiles and permission sets\\",\\n          \\"severity\\": \\"High\\",\\n          \\"metric\\": 75,\\n          \\"suggestedAction\\": \\"Review profile design for overlap reduction\\"\\n        },\\n        {\\n          \\"title\\": \\"PSG Redundancy\\",\\n          \\"detail\\": \\"4 redundant direct PS assignments detected\\",\\n          \\"severity\\": \\"Medium\\",\\n          \\"metric\\": 4,\\n          \\"suggestedAction\\": \\"Remove redundant direct PS assignments covered by PSG\\"\\n        }\\n      ]\\n    },\\n    \\"profilePSRedundancy\\": {\\n      \\"byProfile\\": [\\n        {\\n          \\"profile\\": \\"Standard User\\",\\n          \\"totalPerms\\": 50,\\n          \\"redundantPerms\\": 10,\\n          \\"overlapPct\\": 20,\\n          \\"topOverlappingPS\\": [\\n            {\\n              \\"ps\\": \\"Sales Access\\",\\n              \\"count\\": 8\\n            },\\n            {\\n              \\"ps\\": \\"Account Manager\\",\\n              \\"count\\": 2\\n            }\\n          ],\\n          \\"usersAffected\\": 3\\n        }\\n      ],\\n      \\"byPS\\": [\\n        {\\n          \\"ps\\": \\"Sales Access\\",\\n          \\"overlappingProfiles\\": [\\n            {\\n              \\"profile\\": \\"Standard User\\",\\n              \\"count\\": 8\\n            }\\n          ],\\n          \\"totalRedundant\\": 8,\\n          \\"usersAffected\\": 3\\n        }\\n      ]\\n    },\\n    \\"multiplePSRedundancy\\": {\\n      \\"byUser\\": [\\n        {\\n          \\"user\\": \\"alice@example.com\\",\\n          \\"redundantPerms\\": 5,\\n          \\"totalPS\\": 3,\\n          \\"worstPairs\\": [\\n            {\\n              \\"psA\\": \\"Sales Basic\\",\\n              \\"psB\\": \\"Sales Advanced\\",\\n              \\"shared\\": 4\\n            }\\n          ],\\n          \\"score\\": 15\\n        }\\n      ],\\n      \\"byPSPair\\": [\\n        {\\n          \\"psA\\": \\"Sales Basic\\",\\n          \\"psB\\": \\"Sales Advanced\\",\\n          \\"sharedPerms\\": 8,\\n          \\"usersWithBoth\\": 2\\n        }\\n      ],\\n      \\"byPermission\\": [\\n        {\\n          \\"permission\\": \\"ObjectPermissions::Account.Read::true\\",\\n          \\"psCount\\": 3,\\n          \\"userCount\\": 5\\n        }\\n      ]\\n    },\\n    \\"psgRedundancy\\": {\\n      \\"byPSG\\": [\\n        {\\n          \\"psg\\": \\"Sales Team\\",\\n          \\"redundantPS\\": [\\n            {\\n              \\"ps\\": \\"Sales Access\\",\\n              \\"userCount\\": 2\\n            }\\n          ],\\n          \\"totalUsers\\": 2,\\n          \\"exampleUsers\\": [\\n            \\"bob@example.com\\",\\n            \\"charlie@example.com\\"\\n          ]\\n        }\\n      ]\\n    },\\n    \\"profileOnly\\": [\\n      {\\n        \\"rank\\": 1,\\n        \\"profile\\": \\"System Administrator\\",\\n        \\"uniquePerms\\": 150,\\n        \\"pctOfProfile\\": 85,\\n        \\"userCount\\": 2,\\n        \\"complexity\\": \\"High\\"\\n      },\\n      {\\n        \\"rank\\": 2,\\n        \\"profile\\": \\"Standard User\\",\\n        \\"uniquePerms\\": 25,\\n        \\"pctOfProfile\\": 45,\\n        \\"userCount\\": 10,\\n        \\"complexity\\": \\"Low\\"\\n      }\\n    ],\\n    \\"overlapClassified\\": [\\n      {\\n        \\"permission_set_a\\": {\\n          \\"name\\": \\"Sales Basic\\",\\n          \\"permission_count\\": 10\\n        },\\n        \\"permission_set_b\\": {\\n          \\"name\\": \\"Sales Advanced\\",\\n          \\"permission_count\\": 15\\n        },\\n        \\"metrics\\": {\\n          \\"overlap_percentage\\": 0.95\\n        },\\n        \\"relationship\\": \\"Near-perfect subset\\"\\n      }\\n    ],\\n    \\"thresholds\\": {\\n      \\"redundancyHigh\\": 100,\\n      \\"redundancyMedium\\": 30,\\n      \\"overlapHigh\\": 0.95,\\n      \\"overlapMedium\\": 0.8,\\n      \\"complexityHigh\\": 100,\\n      \\"complexityHighPct\\": 80,\\n      \\"complexityMedium\\": 30,\\n      \\"complexityMediumPct\\": 50\\n    }\\n  }\\n}"
`;

exports[`Reporter snapshots > JSON report with null aggregated 1`] = `
"{\\n  \\"metadata\\": {\\n    \\"generatedAt\\": \\"TIMESTAMP\\",\\n    \\"version\\": \\"1.1.0\\",\\n    \\"dbPath\\": \\"/path/to/test.db\\",\\n    \\"limit\\": 10\\n  },\\n  \\"analysis\\": {\\n    \\"redundancy\\": {\\n      \\"profile_ps_redundancy\\": {\\n        \\"summary\\": {\\n          \\"total_redundant_permissions\\": 15,\\n          \\"affected_users\\": 3,\\n          \\"affected_permission_sets\\": 2\\n        },\\n        \\"details\\": [\\n          {\\n            \\"permission\\": \\"ObjectPermissions::Account.Read\\",\\n            \\"user\\": \\"alice@example.com\\",\\n            \\"profile\\": \\"Standard User\\",\\n            \\"permission_sets\\": [\\n              \\"Sales Access\\",\\n              \\"Account Manager\\"\\n            ],\\n            \\"value\\": \\"true\\"\\n          }\\n        ]\\n      },\\n      \\"multiple_ps_redundancy\\": {\\n        \\"summary\\": {\\n          \\"total_redundant_permissions\\": 8,\\n          \\"affected_users\\": 2\\n        },\\n        \\"details\\": []\\n      },\\n      \\"psg_redundancy\\": {\\n        \\"summary\\": {\\n          \\"total_redundant_assignments\\": 4,\\n          \\"affected_users\\": 2\\n        },\\n        \\"details\\": [\\n          {\\n            \\"user\\": \\"bob@example.com\\",\\n            \\"psg\\": \\"Sales Team\\",\\n            \\"redundant_ps\\": [\\n              \\"Sales Access\\"\\n            ]\\n          }\\n        ]\\n      },\\n      \\"profile_only_permissions\\": {\\n        \\"summary\\": {\\n          \\"total_profile_only\\": 42,\\n          \\"profiles_affected\\": 3,\\n          \\"percentage_profile_only\\": \\"25.5\\"\\n        },\\n        \\"details\\": []\\n      }\\n    },\\n    \\"overlap\\": {\\n      \\"summary\\": {\\n        \\"total_comparisons\\": 10,\\n        \\"high_overlap_pairs\\": 2\\n      },\\n      \\"pairs\\": [\\n        {\\n          \\"permission_set_a\\": {\\n            \\"name\\": \\"Sales Basic\\",\\n            \\"permission_count\\": 10\\n          },\\n          \\"permission_set_b\\": {\\n            \\"name\\": \\"Sales Advanced\\",\\n            \\"permission_count\\": 15\\n          },\\n          \\"metrics\\": {\\n            \\"overlap_percentage\\": 0.95,\\n            \\"jaccard_index\\": 0.75\\n          }\\n        }\\n      ]\\n    },\\n    \\"psg_recommendations\\": {\\n      \\"hierarchical\\": {\\n        \\"recommendations\\": [\\n          {\\n            \\"basePermissionSet\\": \\"Admin Full\\",\\n            \\"basePermissionCount\\": 100,\\n            \\"totalSubsets\\": 2,\\n            \\"recommendedPSG\\": {\\n              \\"members\\": [\\n                \\"Admin Read\\",\\n                \\"Admin Edit\\"\\n              ]\\n            }\\n          }\\n        ]\\n      },\\n      \\"coAssignment\\": {\\n        \\"recommendations\\": [\\n          {\\n            \\"members\\": [\\n              \\"Sales Basic\\",\\n              \\"Marketing Basic\\"\\n            ],\\n            \\"member_count\\": 2,\\n            \\"estimated_reduction\\": 2\\n          }\\n        ]\\n      }\\n    }\\n  },\\n  \\"aggregated\\": null\\n}"
`;

exports[`Reporter snapshots > Markdown report snapshot 1`] = `
"# Salesforce Permission Analysis Report\\n\\n**Generated:** TIMESTAMP\\n\\n---\\n\\n## Analysis Summary\\n\\n### Key Findings\\n\\n| Metric | Value | Context |\\n|--------|-------|--------|\\n| **Total Redundant Permissions** | 15 | Across 3 users |\\n| **Permission Sets Analyzed** | 5 | With 2 high-overlap pairs |\\n\\n---\\n\\n### Areas Worth Reviewing\\n\\n1. **Profile-PS Overlap**\\n   - 15 redundant permissions found between profiles and permission sets\\n\\n2. **PSG Redundancy**\\n   - 4 redundant direct PS assignments detected\\n\\n---\\n\\n## Profile + Permission Set Redundancy\\n\\n**Question Answered:** Which profiles have design overlap with permission sets?\\n\\n**Summary:** 15 redundant permissions across 3 users and 2 permission sets\\n\\n**Profiles with Highest Permission Set Overlap (Top 10):**\\n\\n| Profile | Total Perms | Redundant Perms | Overlap % | Most Overlapping PS | Users Affected |\\n|---------|-------------|-----------------|-----------|---------------------|----------------|\\n| Standard User | 50 | 10 | 20% | Sales Access (8), Account Manager (2) | 3 |\\n\\n**Permission Sets Most Redundant with Profiles:**\\n\\n| Permission Set | Overlaps With (profiles) | Total Redundant Perms | Users Affected |\\n|----------------|--------------------------|----------------------|----------------|\\n| Sales Access | Standard User (8) | 8 | 3 |\\n\\n**Considerations:**\\n- Profiles with >50% overlap may have design issues worth reviewing\\n- Check if overlapping PS are assigned to all/most users with the profile\\n- High overlap + high user count = large impact if restructured\\n\\n<details>\\n<summary>Show all 1 redundant permissions</summary>\\n\\n| Permission | User | Profile | Permission Sets | Value |\\n|------------|------|---------|-----------------|-------|\\n| ObjectPermissions::Account.Read | alice@example.com | Standard User | Sales Access, Account Manager | true |\\n\\n</details>\\n\\n## Multiple Permission Set Redundancy\\n\\n**Question Answered:** Which users have the most redundant permission set assignments?\\n\\n**Summary:** 8 redundant permissions across 2 users\\n\\n**Users with Highest Permission Set Overlap (Top 10):**\\n\\n| User | Redundant Perms | Total PS Assigned | Worst Overlapping PS Pairs | Redundancy Score |\\n|------|-----------------|-------------------|----------------------------|------------------|\\n| alice@example.com | 5 | 3 | Sales Basic â†” Sales Advanced (4 shared) | 15 |\\n\\n**Most Overlapping Permission Set Pairs:**\\n\\n| PS A | PS B | Shared Perms | Users with Both |\\n|------|------|--------------|----------------|\\n| Sales Basic | Sales Advanced | 8 | 2 |\\n\\n**Most Redundantly Granted Permissions:**\\n\\n| Permission | Granted By (PS count) | User Count |\\n|------------|----------------------|------------|\\n| ObjectPermissions | 3 | 5 |\\n\\n**Considerations:**\\n- Users with many redundant permissions may have accumulated assignments over time\\n- PS pairs with high shared permission counts may indicate opportunities for consolidation\\n- Review if all assigned PS are still needed for each user\\n\\n## Permission Set Group Redundancy\\n\\n**Question Answered:** Which users have redundant direct PS assignments (already covered by their PSG)?\\n\\n**Summary:** 4 redundant assignments across 2 users\\n\\n**Context:**\\n- Users assigned to a PSG automatically receive all member PS permissions\\n- Direct PS assignment in addition to PSG membership is redundant\\n- Often caused by assignments made before PSG was created\\n\\n**Redundancy by Permission Set Group:**\\n\\n| PSG | Redundant Direct PS | User Count | Example Users |\\n|-----|---------------------|------------|---------------|\\n| Sales Team | Sales Access (2 users) | 2 | bob@example.com, charlie@example.com |\\n\\n**Considerations:**\\n- Verify direct PS doesn't serve specific purpose (audit, license requirement)\\n- Safe to remove if no special requirements\\n- Sales Team affects 2 users (highest impact)\\n\\n<details>\\n<summary>Show all 1 redundant assignments by user</summary>\\n\\n| User | Permission Set Group | Direct Permission Sets |\\n|------|----------------------|------------------------|\\n| bob@example.com | Sales Team | Sales Access |\\n\\n</details>\\n\\n## Profile Dependency Analysis\\n\\n**Question Answered:** Which profiles have the most unique permissions (not duplicated in any permission set)?\\n\\n**Summary:** 42 profile-only permissions across 3 profiles (25.5% of all profile permissions)\\n\\n**Context:**\\n- Permissions granted ONLY by profiles indicate dependency on profile-based security\\n- High unique perm count = more work required to migrate to permission-set-based model\\n- Low unique perm count = profile already well-supported by existing PS\\n\\n**Profiles by Unique Permission Count (Top 10):**\\n\\n| Rank | Profile | Unique Perms | % of Profile | Users | Migration Complexity |\\n|------|---------|--------------|--------------|-------|----------------------|\\n| 1 | System Administrator | 150 | 85% | 2 | ðŸ”´ High |\\n| 2 | Standard User | 25 | 45% | 10 | ðŸŸ¢ Low |\\n\\n**Migration Complexity Assessment:**\\n\\n| Complexity | Criteria | Profile Count |\\n|------------|----------|---------------|\\n| ðŸ”´ High | >100 unique perms OR >80% of profile | 1 |\\n| ðŸŸ¡ Medium | 30-100 unique OR 50-80% of profile | 0 |\\n| ðŸŸ¢ Low | <30 unique OR <50% of profile | 1 |\\n\\n## Permission Set Overlap Analysis\\n\\n**Context:** Measures how similar permission sets are to each other. High overlap may indicate:\\n- Redundant permission sets serving similar purposes\\n- Subset relationships (one PS contains all permissions of another)\\n- Opportunities for consolidation via Permission Set Groups\\n\\n**Overlap Metric:**\\n- **100%** = PS B contains all permissions in PS A (perfect subset)\\n- **>80%** = Very high overlap, strong consolidation candidate\\n- **50-80%** = Moderate overlap, may share functional area\\n- **<50%** = Low overlap (excluded from this report)\\n\\n**Summary:** 10 comparisons, 2 pairs above threshold\\n\\n**High Overlap Pairs:**\\n\\n| Permission Set A | Permission Set B | Overlap | Relationship |\\n|------------------|------------------|---------|--------------|\\n| Sales Basic (10 perms) | Sales Advanced (15 perms) | 95.0% | Near-perfect subset |\\n\\n**Interpretation:**\\n- **Near-perfect subsets (>95%):** Consider if smaller PS is needed when users have both\\n- **High overlap (80-95%):** May indicate overlapping functional areas\\n- **Moderate overlap (50-80%):** Review actual user assignments to determine if consolidation makes sense\\n\\n**Considerations:**\\n- Overlap doesn't necessarily mean redundancy (different user populations may need similar access)\\n- Some overlap may be intentional (e.g., base permissions duplicated across areas)\\n\\n## Permission Set Group Patterns\\n\\n### Hierarchical Relationships Detected\\n\\n**Pattern:** Permission sets where one contains all permissions of another (subset relationships)\\n\\n\`\`\`\\nAdmin Full (100 permissions)\\nâ”œâ”€â”€ Contains: Admin Read\\nâ””â”€â”€ Contains: Admin Edit\\n\`\`\`\\n\\n**Other Hierarchical Patterns:**\\n\\n| Base PS | Permission Count | Contains (subset count) |\\n|---------|------------------|-------------------------|\\n| Admin Full | 100 | 2 smaller PS |\\n\\n**Reviewing Hierarchies:**\\n- Check if users receive both base PS and subset PS\\n- Verify if subset PS serve distinct user populations\\n- Consider PSG structure if same users receive multiple levels\\n\\n### Frequently Co-Assigned Permission Sets\\n\\n**Pattern:** Permission sets that are often assigned together to the same users\\n\\n| Permission Sets in Bundle | Member Count | Assignments Saved per User |\\n|---------------------------|--------------|----------------------------|\\n| Sales Basic, Marketing Basic | 2 | 2 |\\n\\n**Reviewing Co-Assignments:**\\n- Check if all users with pattern need all PS in bundle\\n- Consider if pattern reflects job role or is accidental accumulation\\n- Validate business logic before creating PSG\\n\\n## Dependency Health\\n\\n**Question Answered:** Are permission dependencies satisfied (e.g., field permissions require object Read)?\\n\\nDependency analysis not available. Run parse command to seed dependency rules.\\n\\n---\\n\\n*For complete analysis data, export to JSON format.*\\n"
`;

exports[`Reporter snapshots > Markdown report with limit=5 snapshot 1`] = `
"# Salesforce Permission Analysis Report\\n\\n**Generated:** TIMESTAMP\\n\\n---\\n\\n## Analysis Summary\\n\\n### Key Findings\\n\\n| Metric | Value | Context |\\n|--------|-------|--------|\\n| **Total Redundant Permissions** | 15 | Across 3 users |\\n| **Permission Sets Analyzed** | 5 | With 2 high-overlap pairs |\\n\\n---\\n\\n### Areas Worth Reviewing\\n\\n1. **Profile-PS Overlap**\\n   - 15 redundant permissions found between profiles and permission sets\\n\\n2. **PSG Redundancy**\\n   - 4 redundant direct PS assignments detected\\n\\n---\\n\\n## Profile + Permission Set Redundancy\\n\\n**Question Answered:** Which profiles have design overlap with permission sets?\\n\\n**Summary:** 15 redundant permissions across 3 users and 2 permission sets\\n\\n**Profiles with Highest Permission Set Overlap (Top 5):**\\n\\n| Profile | Total Perms | Redundant Perms | Overlap % | Most Overlapping PS | Users Affected |\\n|---------|-------------|-----------------|-----------|---------------------|----------------|\\n| Standard User | 50 | 10 | 20% | Sales Access (8), Account Manager (2) | 3 |\\n\\n**Permission Sets Most Redundant with Profiles:**\\n\\n| Permission Set | Overlaps With (profiles) | Total Redundant Perms | Users Affected |\\n|----------------|--------------------------|----------------------|----------------|\\n| Sales Access | Standard User (8) | 8 | 3 |\\n\\n**Considerations:**\\n- Profiles with >50% overlap may have design issues worth reviewing\\n- Check if overlapping PS are assigned to all/most users with the profile\\n- High overlap + high user count = large impact if restructured\\n\\n<details>\\n<summary>Show all 1 redundant permissions</summary>\\n\\n| Permission | User | Profile | Permission Sets | Value |\\n|------------|------|---------|-----------------|-------|\\n| ObjectPermissions::Account.Read | alice@example.com | Standard User | Sales Access, Account Manager | true |\\n\\n</details>\\n\\n## Multiple Permission Set Redundancy\\n\\n**Question Answered:** Which users have the most redundant permission set assignments?\\n\\n**Summary:** 8 redundant permissions across 2 users\\n\\n**Users with Highest Permission Set Overlap (Top 5):**\\n\\n| User | Redundant Perms | Total PS Assigned | Worst Overlapping PS Pairs | Redundancy Score |\\n|------|-----------------|-------------------|----------------------------|------------------|\\n| alice@example.com | 5 | 3 | Sales Basic â†” Sales Advanced (4 shared) | 15 |\\n\\n**Most Overlapping Permission Set Pairs:**\\n\\n| PS A | PS B | Shared Perms | Users with Both |\\n|------|------|--------------|----------------|\\n| Sales Basic | Sales Advanced | 8 | 2 |\\n\\n**Most Redundantly Granted Permissions:**\\n\\n| Permission | Granted By (PS count) | User Count |\\n|------------|----------------------|------------|\\n| ObjectPermissions | 3 | 5 |\\n\\n**Considerations:**\\n- Users with many redundant permissions may have accumulated assignments over time\\n- PS pairs with high shared permission counts may indicate opportunities for consolidation\\n- Review if all assigned PS are still needed for each user\\n\\n## Permission Set Group Redundancy\\n\\n**Question Answered:** Which users have redundant direct PS assignments (already covered by their PSG)?\\n\\n**Summary:** 4 redundant assignments across 2 users\\n\\n**Context:**\\n- Users assigned to a PSG automatically receive all member PS permissions\\n- Direct PS assignment in addition to PSG membership is redundant\\n- Often caused by assignments made before PSG was created\\n\\n**Redundancy by Permission Set Group:**\\n\\n| PSG | Redundant Direct PS | User Count | Example Users |\\n|-----|---------------------|------------|---------------|\\n| Sales Team | Sales Access (2 users) | 2 | bob@example.com, charlie@example.com |\\n\\n**Considerations:**\\n- Verify direct PS doesn't serve specific purpose (audit, license requirement)\\n- Safe to remove if no special requirements\\n- Sales Team affects 2 users (highest impact)\\n\\n<details>\\n<summary>Show all 1 redundant assignments by user</summary>\\n\\n| User | Permission Set Group | Direct Permission Sets |\\n|------|----------------------|------------------------|\\n| bob@example.com | Sales Team | Sales Access |\\n\\n</details>\\n\\n## Profile Dependency Analysis\\n\\n**Question Answered:** Which profiles have the most unique permissions (not duplicated in any permission set)?\\n\\n**Summary:** 42 profile-only permissions across 3 profiles (25.5% of all profile permissions)\\n\\n**Context:**\\n- Permissions granted ONLY by profiles indicate dependency on profile-based security\\n- High unique perm count = more work required to migrate to permission-set-based model\\n- Low unique perm count = profile already well-supported by existing PS\\n\\n**Profiles by Unique Permission Count (Top 5):**\\n\\n| Rank | Profile | Unique Perms | % of Profile | Users | Migration Complexity |\\n|------|---------|--------------|--------------|-------|----------------------|\\n| 1 | System Administrator | 150 | 85% | 2 | ðŸ”´ High |\\n| 2 | Standard User | 25 | 45% | 10 | ðŸŸ¢ Low |\\n\\n**Migration Complexity Assessment:**\\n\\n| Complexity | Criteria | Profile Count |\\n|------------|----------|---------------|\\n| ðŸ”´ High | >100 unique perms OR >80% of profile | 1 |\\n| ðŸŸ¡ Medium | 30-100 unique OR 50-80% of profile | 0 |\\n| ðŸŸ¢ Low | <30 unique OR <50% of profile | 1 |\\n\\n## Permission Set Overlap Analysis\\n\\n**Context:** Measures how similar permission sets are to each other. High overlap may indicate:\\n- Redundant permission sets serving similar purposes\\n- Subset relationships (one PS contains all permissions of another)\\n- Opportunities for consolidation via Permission Set Groups\\n\\n**Overlap Metric:**\\n- **100%** = PS B contains all permissions in PS A (perfect subset)\\n- **>80%** = Very high overlap, strong consolidation candidate\\n- **50-80%** = Moderate overlap, may share functional area\\n- **<50%** = Low overlap (excluded from this report)\\n\\n**Summary:** 10 comparisons, 2 pairs above threshold\\n\\n**High Overlap Pairs:**\\n\\n| Permission Set A | Permission Set B | Overlap | Relationship |\\n|------------------|------------------|---------|--------------|\\n| Sales Basic (10 perms) | Sales Advanced (15 perms) | 95.0% | Near-perfect subset |\\n\\n**Interpretation:**\\n- **Near-perfect subsets (>95%):** Consider if smaller PS is needed when users have both\\n- **High overlap (80-95%):** May indicate overlapping functional areas\\n- **Moderate overlap (50-80%):** Review actual user assignments to determine if consolidation makes sense\\n\\n**Considerations:**\\n- Overlap doesn't necessarily mean redundancy (different user populations may need similar access)\\n- Some overlap may be intentional (e.g., base permissions duplicated across areas)\\n\\n## Permission Set Group Patterns\\n\\n### Hierarchical Relationships Detected\\n\\n**Pattern:** Permission sets where one contains all permissions of another (subset relationships)\\n\\n\`\`\`\\nAdmin Full (100 permissions)\\nâ”œâ”€â”€ Contains: Admin Read\\nâ””â”€â”€ Contains: Admin Edit\\n\`\`\`\\n\\n**Other Hierarchical Patterns:**\\n\\n| Base PS | Permission Count | Contains (subset count) |\\n|---------|------------------|-------------------------|\\n| Admin Full | 100 | 2 smaller PS |\\n\\n**Reviewing Hierarchies:**\\n- Check if users receive both base PS and subset PS\\n- Verify if subset PS serve distinct user populations\\n- Consider PSG structure if same users receive multiple levels\\n\\n### Frequently Co-Assigned Permission Sets\\n\\n**Pattern:** Permission sets that are often assigned together to the same users\\n\\n| Permission Sets in Bundle | Member Count | Assignments Saved per User |\\n|---------------------------|--------------|----------------------------|\\n| Sales Basic, Marketing Basic | 2 | 2 |\\n\\n**Reviewing Co-Assignments:**\\n- Check if all users with pattern need all PS in bundle\\n- Consider if pattern reflects job role or is accidental accumulation\\n- Validate business logic before creating PSG\\n\\n## Dependency Health\\n\\n**Question Answered:** Are permission dependencies satisfied (e.g., field permissions require object Read)?\\n\\nDependency analysis not available. Run parse command to seed dependency rules.\\n\\n---\\n\\n*For complete analysis data, export to JSON format.*\\n"
`;
